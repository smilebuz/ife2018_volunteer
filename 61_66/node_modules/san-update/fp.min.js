!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(r.sanUpdateFP=r.sanUpdateFP||{})}(this,function(r){var n=function(r){var n={};for(var e in r)n[e]=r[e];return n},e=function(r,n){for(var e=0;e<r.length;e++){var o=r[e];if(n(o))return o}},o=function(r){if(!r)return!1;for(var n in r)if(r.hasOwnProperty(n))return!0;return!1},t=function(r,n){for(var e=0;e<r.length;e++)if(r[e]===n)return e;return-1},i=function(r,n,e){return{$change:r,oldValue:n,newValue:e}},a=function(r,n,e,o,t){return{$change:"change",oldValue:r,newValue:n,splice:{index:e,deleteCount:o,insertions:t}}},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u=function(){function r(r,n){var e=[],o=!0,t=!1,i=void 0;try{for(var a,f=r[Symbol.iterator]();!(o=(a=f.next()).done)&&(e.push(a.value),!n||e.length!==n);o=!0);}catch(r){t=!0,i=r}finally{try{!o&&f.return&&f.return()}finally{if(t)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(r){return Array.isArray(r)?r:Array.from(r)},s=function(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)},y={},p={$set:function(r,n,e){var o=r[n];return e===o?[e,null]:[e,i(r.hasOwnProperty(n)?"change":"add",o,e)]},$push:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $push command on non array object is forbidden.");var t=o.concat([e]);return[t,a(o,t,o.length,0,[e])]},$unshift:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $unshift command on non array object is forbidden.");var t=[e].concat(o);return[t,a(o,t,0,0,[e])]},$pop:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $pop command on non array object is forbidden.");if(o.length&&(e===!0||"function"==typeof e&&e(o))){var t=o.slice(0,-1);return[t,a(o,t,o.length,1,[])]}return[o,null]},$shift:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $shift command on non array object is forbidden.");if(o.length&&(e===!0||"function"==typeof e&&e(o))){var t=o.slice(1);return[t,a(o,t,o.length,1,[])]}return[o,null]},$removeAt:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $removeAt command on non array object is forbidden.");if(e>=o.length||e<0)return[o,null];var t=o.slice(0,e).concat(o.slice(e+1));return[t,a(o,t,e,1,[])]},$remove:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $removeAt command on non array object is forbidden.");var i=t(o,e);if(i===-1)return[o,null];var f=o.slice(0,i).concat(o.slice(i+1));return[f,a(o,f,i,1,[])]},$splice:function(r,n,e){var o=c(e),t=o[0],i=o[1],f=o.slice(2),u=r[n];if(!Array.isArray(u))throw new Error("Usage of $splice command on non array object is forbidden.");var s=u.slice(0,t).concat(f).concat(u.slice(t+i));return[s,a(u,s,t,i,f)]},$map:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $map command on non array object is forbidden.");var t=o.map(e);return[t,i("change",o,t)]},$filter:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $filter command on non array object is forbidden.");var t=o.filter(e);return[t,i("change",o,t)]},$reduce:function(r,n,e){var o=r[n];if(!Array.isArray(o))throw new Error("Usage of $reduce command on non array object is forbidden.");var t="function"==typeof e?o.reduce(e):o.reduce.apply(o,s(e));return[t,i("change",o,t)]},$merge:function(r,e,o){var t=r[e]||{},a=n(t),f={};for(var u in o)if(o.hasOwnProperty(u)){var c=o[u],s=t[u];if(c!==s){a[u]=c;var y=t.hasOwnProperty(u)?"change":"add";f[u]=i(y,s,c)}}return[a,f]},$defaults:function(r,e,o){var t=r[e],a=n(t),f={};for(var u in o)o.hasOwnProperty(u)&&void 0===a[u]&&(a[u]=o[u],f[u]=i("add",void 0,o[u]));return[a,f]},$apply:function(r,n,e){var o=e(r[n]);return[o,i(r.hasOwnProperty(n)?"change":"add",r[n],o)]},$omit:function(r,n,e){var o=r[n];return e===!0||"function"==typeof e&&e(o)?[y,i("remove",o,void 0)]:[o,null]},$composeBefore:function(r,n,e){var o=r[n];if("function"!=typeof o)throw new Error("Usage of $composeBefore command on non function object is forbidden.");if("function"!=typeof e)throw new Error("Passing non function object to $composeBefore command is forbidden");var t=function(){return o(e.apply(void 0,arguments))};return[t,i("change",o,t)]},$composeAfter:function(r,n,e){var o=r[n];if("function"!=typeof o)throw new Error("Usage of $composeAfter command on non function object is forbidden.");if("function"!=typeof e)throw new Error("Passing non function object to $composeAfter command is forbidden");var t=function(){return e(o.apply(void 0,arguments))};return[t,i("change",o,t)]}},l=Object.keys(p),d=(l.map(function(r){return r.slice(1)}),function r(n,t){var i=e(l,function(r){return t.hasOwnProperty(r)});if(i){var a={source:n},f=t[i];return p[i](a,"source",f)}var c=function(o){var i=t[o],a=e(l,function(r){return i.hasOwnProperty(r)});return a?p[a](n,o,i[a]):r(n[o]||{},i)},s=function(r,n){for(var e in t)if(!r.hasOwnProperty(e)&&t.hasOwnProperty(e)){var o=c(e),i=u(o,2),a=i[0],f=i[1];n[e]=f,a!==y&&(r[e]=a)}return[r,n]};if(Array.isArray(n)){for(var d=[],v={},h=0;h<n.length;h++)if(t.hasOwnProperty(h)){var m=c(h),$=u(m,2),w=$[0],A=$[1];o(A)&&(v[h]=A),w!==y&&d.push(w)}else d.push(n[h]);return s(d,v)}var g={},b={};for(var j in n)if(t.hasOwnProperty(j)){var P=c(j),E=u(P,2),w=E[0],A=E[1];o(A)&&(b[j]=A),w!==y&&(g[j]=w)}else g[j]=n[j];return s(g,b)}),v=function(r,n){return d(r,n)[0]},h="[".charCodeAt(0),m=function(r){if(Array.isArray(r))return r;for(var n=(r+"").split("."),e=[],o=0;o<n.length;o++){var t=n[o],i=t.indexOf("[");if(i>=0)for(i>0&&(e.push(t.slice(0,i)),t=t.slice(i));t.charCodeAt(0)===h;){var a=t.indexOf("]");if(a<0)throw new Error("Property path syntax error: "+r);var f=t.slice(1,a);if(/^[0-9]+$/.test(f))e.push(+f);else{if(!/^(['"])([^\1]+)\1$/.test(f))throw new Error("Property path syntax error: "+r);e.push(new Function("return "+f)())}t=t.slice(a+1)}else e.push(t)}return e},$=function(r,n){if(null==r)return n;for(var e=m(r),o={},t=o,i=0;i<e.length-1;i++)t=t[e[i]]={};return t[e[e.length-1]]=n,o},w=function(r,n,e){return v(r,$(n,{$set:e}))},A=function(r,n,e){return v(r,$(n,{$push:e}))},g=function(r,n,e){return v(r,$(n,{$unshift:e}))},b=function(r,n,e){return v(r,$(n,{$pop:e}))},j=function(r,n,e){return v(r,$(n,{$shift:e}))},P=function(r,n,e){return v(r,$(n,{$removeAt:e}))},E=function(r,n,e){return v(r,$(n,{$remove:e}))},O=function(r,n,e,o){for(var t=arguments.length,i=Array(t>4?t-4:0),a=4;a<t;a++)i[a-4]=arguments[a];var f=[e,o].concat(i);return v(r,$(n,{$splice:f}))},U=function(r,n,e){return v(r,$(n,{$map:e}))},x=function(r,n,e){return v(r,$(n,{$filter:e}))},S=function(r,n){for(var e=arguments.length,o=Array(e>2?e-2:0),t=2;t<e;t++)o[t-2]=arguments[t];var i=1===o.length?{$reduce:o[0]}:{$reduce:o};return v(r,$(n,i))},B=function(r,n,e){return v(r,$(n,{$merge:e}))},V=function(r,n,e){return v(r,$(n,{$defaults:e}))},C=function(r,n,e){return v(r,$(n,{$apply:e}))},F=function(r,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return v(r,$(n,{$omit:e}))},_=function(r,n,e){return v(r,$(n,{$composeBefore:e}))},k=function(r,n,e){return v(r,$(n,{$composeAfter:e}))},I=function(r,n,e,o){if(Array.isArray(e)){var t=function(){var t=e.map(function(n){return n(r)}),i=function(r){return o.apply(void 0,s(t).concat([r]))};return{v:C(r,n,i)}}();if("object"===("undefined"==typeof t?"undefined":f(t)))return t.v}var i=e(r),a=function(r){return o(i,r)};return C(r,n,a)},M=function(r){return function(){for(var n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];return function(n){return r.apply(void 0,[n].concat(e))}}},T=M(w),W=M(A),q=M(g),z=M(b),D=M(j),G=M(P),H=M(E),J=M(O),K=M(U),L=M(x),N=M(S),Q=M(B),R=M(V),X=M(C),Y=M(F),Z=M(_),rr=M(k),nr=M(I);r.set=T,r.push=W,r.unshift=q,r.pop=z,r.shift=D,r.removeAt=G,r.remove=H,r.splice=J,r.map=K,r.filter=L,r.reduce=N,r.merge=Q,r.defaults=R,r.apply=X,r.omit=Y,r.composeBefore=Z,r.composeAfter=rr,r.applyWith=nr,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=map/fp.min.js.map
